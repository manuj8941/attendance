<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="/css/mobile.css">
  </head>

  <body>
    <div class="container">
      <h1>Sign in</h1>
      <div id="login-error" class="notice" style="display:none"></div>
      <form action="/login" method="post">
        <label for="name">Your username</label>
        <input type="text" id="name" name="name" required>

        <label for="password">Password</label>
        <input type="password" id="password" name="password" required>

        <button type="submit">Sign in</button>
      </form>
    </div>
    <script>
      // Fetch any server-side login error (flash) and show it
      ( async function ()
      {
        try
        {
          const res = await fetch( '/login/error' );
          if ( !res.ok ) return;
          const data = await res.json();
          if ( data && data.error )
          {
            const el = document.getElementById( 'login-error' );
            el.textContent = data.error;
            el.style.display = 'block';
          }
        } catch ( e )
        {
          // ignore
        }
      } )();
    </script>
  </body>

</html>